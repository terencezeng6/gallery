<!DOCTYPE HTML>
<html>

<head>
    <title>Gallery | Terence Zeng</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link href="https://api.fontshare.com/v2/css?f[]=satoshi@700,500,301,701,300,501,401,400&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="assets/css/main.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
        integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://pro.fontawesome.com/releases/v6.0.0-beta3/css/all.css" rel="stylesheet">
    <style>
        *[theme="light"] {
            background-color: white;
            background: white;
            transition: 0.5s;
        }

        *[theme="dark"] {
            background-color: black;
            background: black;
            transition: 0.5s;
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0);
        }

        ::-webkit-scrollbar-thumb {
            background-color: rgb(75, 75, 75);
            border-radius: 4px;
        }

        .switch {
            padding-top: 50px;
        }

        label {
            width: 50px;
            height: 20px;
            position: relative;
            display: block;
            background: #ebebeb;
            border-radius: 20px;
            box-shadow: inset 0px 5px 15px rgba(0, 0, 0, 0.4), inset 0px -5px 15px rgba(255, 255, 255, 0.4);
            cursor: pointer;
            transition: 0.5s;
            transition: filter 0s, ease-in-out 0.5s;
        }

        label::before {
            opacity: 0;
        }

        label:after {
            content: "";
            width: 18px;
            height: 18px;
            position: absolute;
            top: 1px;
            left: 1px;
            background: linear-gradient(180deg, #ffffff, #aaaaaa);
            border-radius: 18px;
            box-shadow: 0px 5px 10px rgba(0, 0, 0, 0.2);
            transition: 0.5s;
        }

        input {
            width: 0;
            height: 0;
            visibility: hidden;
        }

        input[type="checkbox"] {
            width: 0;
            height: 0;
            visibility: hidden;
        }

        input:checked+label {
            background: #242424;
        }

        input:checked+label:after {
            left: 49px;
            transform: translateX(-100%);
            background: linear-gradient(180deg, #777, #3a3a3a);
        }

        label:active:after {
            width: 26px;
        }

        .popup {
            position: fixed;
            top: -100%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 50%;
            max-width: 400px;
            padding: 25px;
            border-radius: 5px;
            box-shadow: 0px 2px 2px 4px rgba(0, 0, 0, 0.1);
            z-index: 1;
            transition: top 0s ease-in-out 0s, opacity 0.5s ease-in-out, margin-top 0.5s ease-in-out;
            background-color: white;
        }

        .popup[theme="dark"] {
            background-color: black;
        }

        .popup[theme="light"] {
            background-color: white;
        }

        .popup h2 {
            font-family: "Satoshi", sans-serif;
            color: gray;
        }

        .popup p {
            font-family: "Satoshi", sans-serif;
        }

        .popup .close-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 20px;
            height: 20px;
            cursor: pointer;
            color: gray;
        }

        body.active-popup .gallery,
        body.active-popup .about,
        body.active-popup .heading,
        body.active-popup label {
            filter: blur(15px);
            transition: filter 0.5s ease-in-out 0s;
        }

        body.active-popup .popup {
            top: 50%;
            opacity: 1;
            margin-top: 0;
            transition: top 0s ease-in-out 0s, opacity 0.5s ease-in-out, margin-top 0.5s ease-in-out;
        }

        input:checked+label+.background {
            background: #242424;
        }

        label svg {
            position: absolute;
            width: 12px;
            top: 4px;
            z-index: 100;
            transition: 0.3s;
        }

        label svg.sun {
            left: 4px;
            fill: #000000;
            transition: 0.3s;
            background-color: rgba(0, 0, 0, 0);
        }

        label svg.moon {
            left: 34px;
            fill: #7e7e7e;
            transition: 0.3s;
            background-color: rgba(0, 0, 0, 0);
        }

        input:checked+label svg.sun {
            fill: #7e7e7e;
            background-color: rgba(0, 0, 0, 0);
        }

        input:checked+label svg.moon {
            fill: #fff;
            background-color: rgba(0, 0, 0, 0);
        }

        .heading {
            font-family: "Satoshi", sans-serif;
            text-align: center;
            font-size: 40px;
            font-weight: 200;
            color: gray;
            padding-top: 0px;
            padding-bottom: 50px;
            transition: filter 0s, ease-in-out 0.5s;
        }

        .about {
            font-family: Satoshi, sans-serif;
            color: gray;
            font-weight: 200;
            text-transform: none;
            font-size: 16px;
            padding-left: 30px;
            padding-right: 30px;
            text-align: center;
            position: absolute;
            top: 32px;
            right: 32px;
            transition: filter 0s, ease-in-out 0.5s;
        }

        .about:hover {
            background-color: rgba(150, 150, 150, 0.2);
        }

        .gallery {
            display: flex;
            width: auto;
            flex-wrap: wrap;
            justify-content: center;
            align-items: flex-start;
            text-align: center;
            gap: 20px;
            transition: filter 0s, ease-in-out 0.5s;
        }

        .image {
            height: 350px;
            width: auto;
            border-radius: 5px;
        }

        .image img {
            height: 100%;
            width: auto;
            border-radius: 5px;
            display: block;
            opacity: 0;
            transition: opacity 0.8s ease-in;
        }

        .image img.image-loaded {
            opacity: 1;
        }

        .image .overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            border-radius: 5px;
            padding: 5px;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            color: white;
            font-family: "Satoshi", sans-serif;
            font-weight: 400;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: 0s;
        }

        .image .overlay .date {
            position: absolute;
            top: 25px;
            font-size: 12px;
            background: rgba(0, 0, 0, 0);
        }

        .image .overlay .description {
            align-items: center;
            margin-top: 50px;
            margin-left: 50px;
            margin-right: 50px;
            font-size: 16px;
            background: rgba(0, 0, 0, 0);
        }

        button {
            position: absolute;
            top: 15px;
            right: 25px;
            box-shadow: none;
            padding: 0;
            margin: 0;
        }

        button:hover {
            background-color: rgba(0, 0, 0, 0);
            color: gray;
        }

        a {
            border-bottom-color: rgba(0, 0, 0, 0);
            color: white;
        }

        a:hover {
            color: gray;
            border-bottom-color: rgba(0, 0, 0, 0);
        }

        .image .overlay:hover {
            opacity: 0.9;
            transition: 0s;
        }

        @media only screen and (max-width: 769px) {
            .switch {
                padding-left: 25px;
                padding-bottom: 25px;
            }

            .image {
                height: auto;
                width: 75%;
                border-radius: 5px;
            }

            .image img {
                height: auto;
                width: 100%;
                border-radius: 5px;
                display: block;
            }

            .gallery {
                display: flex;
                flex-direction: column;
                width: auto;
                flex-wrap: wrap;
                justify-content: center;
                align-items: flex-start;
                text-align: center;
                align-items: center;
                gap: 20px;
            }
        }
    </style>
</head>

<body class="is-preload">

    <!-- Wrapper -->
    <div id="wrapper">

        <!-- Main -->
        <div id="main">
            <div class="inner">

                <!-- Content -->

                <body>
                    <div class="switch">
                        <input type="checkbox" id="darkmode-toggle" />
                        <label for="darkmode-toggle">
                            <svg version="1.1" class="moon" xmlns="http://www.w3.org/2000/svg"
                                xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 49.739 49.739"
                                style="enable-background:new 0 0 49.739 49.739;" xml:space="preserve">
                                <path
                                    d="M25.068,48.889c-9.173,0-18.017-5.06-22.396-13.804C-3.373,23.008,1.164,8.467,13.003,1.979l2.061-1.129l-0.615,2.268
                                    c-1.479,5.459-0.899,11.25,1.633,16.306c2.75,5.493,7.476,9.587,13.305,11.526c5.831,1.939,12.065,1.492,17.559-1.258v0
                                    c0.25-0.125,0.492-0.258,0.734-0.391l2.061-1.13l-0.585,2.252c-1.863,6.873-6.577,12.639-12.933,15.822
                                    C32.639,48.039,28.825,48.888,25.068,48.889z M12.002,4.936c-9.413,6.428-12.756,18.837-7.54,29.253
                                    c5.678,11.34,19.522,15.945,30.864,10.268c5.154-2.582,9.136-7.012,11.181-12.357c-5.632,2.427-11.882,2.702-17.752,0.748
                                    c-6.337-2.108-11.473-6.557-14.463-12.528C11.899,15.541,11.11,10.16,12.002,4.936z" />
                            </svg>
                        </label>
                    </div>
                    <script>
                        document.addEventListener('DOMContentLoaded', async () => {
                            const gallery = document.getElementById('image-gallery');
                            if (!gallery) return;
                            try {
                                const response = await fetch('gallery-data.json');
                                const images = await response.json();

                                images.forEach(imgData => {
                                    const el = document.createElement('div');
                                    el.className = 'image';
                                    el.innerHTML = '<img class="lazy-load-image" data-src="' + imgData.thumbnail + '" src="data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 4 3\'%3E%3C/svg%3E" alt="' + imgData.description + '" />' +
                                        '<div class="overlay">' +
                                        '  <p class="date">' + imgData.dateFormatted + '</p>' +
                                        '  <p class="description">' + imgData.description + '</p>' +
                                        '  <button>' +
                                        '    <a href="' + imgData.original + '" target="_blank">' +
                                        '      <i class="fa-light fa-arrow-up-right-from-square"></i>' +
                                        '    </a>' +
                                        '  </button>' +
                                        '</div>';
                                    gallery.appendChild(el);
                                });

                                const observerOptions = {
                                    root: null,
                                    rootMargin: '100px',
                                    threshold: 0
                                };

                                const observer = new IntersectionObserver((entries, observer) => {
                                    entries.forEach(entry => {
                                        if (entry.isIntersecting) {
                                            const img = entry.target;
                                            img.src = img.getAttribute('data-src');
                                            img.onload = () => { img.classList.add('image-loaded'); };
                                            observer.unobserve(img);
                                        }
                                    });
                                }, observerOptions);

                                const lazyImages = document.querySelectorAll('.lazy-load-image');
                                lazyImages.forEach(img => observer.observe(img));

                            } catch (e) {
                                console.error('Error loading gallery data:', e);
                            }
                        });
                    </script>
                </body>

                <button id="open-popup" class="about">About</button>

                <div class="popup" id="popup">
                    <button class="close-btn">
                        <i class="fa-regular fa-xmark fa-xl"></i>
                    </button>
                    <h2>About</h2>
                    <p>Hi! This image gallery is basically my vsco.
                        Feel free to let me know about any bugs/mistakes.
                        <br>
                        <br>
                        Made with HTML, CSS, JS, and hosted with Github Pages.
                    </p>
                </div>

                <div class="heading">
                    Terence's Gallery
                </div>

                <div class="gallery" id="image-gallery"></div>
                <!--

                    Sidebar
                        <div id="sidebar">
                            <div class="inner">
                                Menu
                                    <nav id="menu">
                                        <header class="major">
                                            <h2>Menu</h2 heading for menu (not necessary)
                                        </header>
                                        <ul>
                                            <li><a href="about.html">About</a></li>
                                        </ul>
                                    </nav>
                            </div>
                        </div>
                                        
                    -->
            </div>

            <!-- Scripts -->
            <script src="assets/js/jquery.min.js"></script>
            <script src="assets/js/browser.min.js"></script>
            <script src="assets/js/breakpoints.min.js"></script>
            <script src="assets/js/util.js"></script>
            <script src="assets/js/main.js"></script>
            <script> //for opening "about" popup
                document.querySelector("#open-popup").addEventListener("click", function () {
                    document.body.classList.add("active-popup");
                });
                document.querySelector(".popup .close-btn").addEventListener("click", function () {
                    document.body.classList.remove("active-popup");
                });
            </script>
            <script> //for dark mode toggle
                const toggle = document.getElementById('darkmode-toggle');
                const popup = document.getElementById('popup');

                function setTheme(theme) {
                    document.body.setAttribute('theme', theme);
                    popup.setAttribute('theme', theme);
                    document.documentElement.setAttribute('theme', theme);
                    localStorage.setItem('theme', theme);
                }

                function handleBackgroundChange(event) {
                    if (event.target.checked) {
                        setTheme('dark');
                    } else {
                        setTheme('light');
                    }
                }

                toggle.addEventListener('change', handleBackgroundChange);

                // Check local storage to set the initial theme
                if (localStorage.getItem('theme') === 'dark') {
                    toggle.checked = true;
                    handleBackgroundChange({ target: toggle }); // Trigger the initial change to set the dark mode
                }
                if (localStorage.getItem('theme') === 'light') {
                    toggle.checked = false;
                    handleBackgroundChange({ target: toggle }); // Trigger the initial change to set the dark mode
                }
            </script>

</body>

</html>